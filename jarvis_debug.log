2025-06-02 16:38:17 [INFO] [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.0.0.52:5000
2025-06-02 16:38:17 [INFO] [33mPress CTRL+C to quit[0m
2025-06-02 16:38:29 [INFO] Voice trigger received from manual_test: turn on the kitchen light
2025-06-02 16:38:29 [INFO] Handling voice command: turn on the kitchen light
2025-06-02 16:38:29 [DEBUG] Starting new HTTP connection (1): homeassistant.local:8123
2025-06-02 16:38:30 [DEBUG] http://homeassistant.local:8123 "GET /api/states HTTP/1.1" 200 82373
2025-06-02 16:38:30 [DEBUG] Retrieved 922 entities from Home Assistant.
2025-06-02 16:38:30 [ERROR] Exception on /api/voice_trigger [POST]
Traceback (most recent call last):
  File "/home/pi/Jarvis-MCP/.venv/lib/python3.11/site-packages/flask/app.py", line 1511, in wsgi_app
    response = self.full_dispatch_request()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/.venv/lib/python3.11/site-packages/flask/app.py", line 919, in full_dispatch_request
    rv = self.handle_user_exception(e)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/.venv/lib/python3.11/site-packages/flask/app.py", line 917, in full_dispatch_request
    rv = self.dispatch_request()
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/.venv/lib/python3.11/site-packages/flask/app.py", line 902, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/main.py", line 86, in voice_trigger
    reply = handle_voice_command(user_input)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/main.py", line 61, in handle_voice_command
    gpt_response = ask_gpt(text, entities)
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/gpt_engine.py", line 35, in ask_gpt
    res = openai.ChatCompletion.create(
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/pi/Jarvis-MCP/.venv/lib/python3.11/site-packages/openai/lib/_old_api.py", line 39, in __call__
    raise APIRemovedInV1(symbol=self._symbol)
openai.lib._old_api.APIRemovedInV1: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-06-02 16:38:30 [INFO] 10.0.0.166 - - [02/Jun/2025 16:38:30] "[35m[1mPOST /api/voice_trigger HTTP/1.1[0m" 500 -
